{% extends 'core/dashboard.html' %}
{% load static %}

{% block extracss %}
<link rel="stylesheet" type="text/css" href="{% static '/assets/lib/datatables/datatables.net-bs4/css/dataTables.bootstrap4.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static '/assets/lib/datatables/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static '/assets/lib/datatables/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css' %}"/>

<style>
 hr.style-one {
    border: 0;
    height: 1px;
    background: #333;
    background-image: linear-gradient(to right, #ccc, #333, #ccc);
}
</style>
{% endblock %}


{% block content %}
<div class="be-content">
	<div class="page-head">
		<h2 class="page-head-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meus Usuários</font></font></h2>
		<nav aria-label="breadcrumb" role="navigation">
			<ol class="breadcrumb page-head-nav">
				<li class="breadcrumb-item"><a href="#"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clínica</font></font></a></li>
				<li class="breadcrumb-item"><a href="#"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usuário</font></font></a></li>
				<li class="breadcrumb-item active"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meus Usuários</font></font></li>
			</ol>
		</nav>
	</div>
	<div class="main-content container-fluid">
		<div class="row">
			<div class="col-sm-8 col-md-8 col-lg-8 col-xl-8">
				<div class="card-body">
					<button class="btn btn-space btn-primary" data-toggle="modal" id="id_button_modal_novoUsuario" type="button">Novo Usuário</button>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<div class="card  card-table">
					<div class="card-body">
						<table class="table table-striped table-hover table-fw-widget" id="id_table_novoUsuario">
							<thead>
							<tr>
								<th style="width:2%;" class="center">Código</th>
								<th style="width:10%;" class="center">Nome</th>
								<th style="width:5%;" class="center">Título</th>
								<th style="width:5%;" class="center">Ativo ?</th>
								<th style="width:5%;" class="center">Admin ?</th>
								<th style="width:5%;" class="center">Agenda Própria ?</th>
								<th style="width:1%;" class="center">Ação</th>
							</tr>
							</thead>
							<tbody>
							{% for usuario in usuarios %}
							<tr class="odd gradeX center">
								<td class="center">{{ usuario.pk }}</td>
								<td class="center">{{ usuario.nomeCompleto }}</td>
								<td class="center">{{ usuario.titulo }}</td>
								<td class="center">{{ usuario.ativo }}</td>
								<td class="center">{{ usuario.admin }}</td>
								<td class="center">{{ usuario.agendaPropria }}</td>
								<td class="row">
									<button class="btn btn-space btn-primary" value="{{ usuario.pk }}" type="button">Editar Usuário</button>
								</td>
							</tr>
							{% empty %}
							<tr>
								<td colspan="6">
									<h2>Você ainda não cadastrou nenhum médico</h2>
								<td>
							</tr>
							{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!--Modal Usuário-->
<div class="modal fade colored-header colored-header-primary " id="id_modal_form_usuario" role="dialog">
	<div class="modal-dialog full-width">
		<div class="modal-content">
			<div class="modal-header modal-header-colored">
				<h3 class="modal-title" id="id_title" >Novo Usuário</h3>
				<button class="close md-close" type="button" data-dismiss="modal" aria-hidden="true"><span class="mdi mdi-close"></span></button>
			</div>
			<div class="modal-body">
				<form  method="POST" id="id_form_novo_usuario">
					{% csrf_token %}
					<hr class="style-one">
					<h2 class="pt-0 pb-5">Dados Gerais</h2>

					<div class="form-group row pt-0">
						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_nomeCompleto">Nome Completo</label>
							<input class="form-control" type="text" id="id_nomeCompleto" name="nomeCompleto" placeholder="Seu nome completo" required>
						</div>
						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_email">Email</label>
							<input class="form-control form-control-success is-invalid" type="email" id="id_email" name="email" placeholder="meuemail@gmail.com" required>
						</div>
						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_titulo">Título</label>
							<select id="id_titulo" name="titulo" class="form-control">
								<option value="MEDICO" selected>MÉDICO</option>
								<option value="FISIOTERAPEUTA">FISIOTERAPEUTA</option>
								<option value="ENFERMEIRO">ENFERMEIRO</option>
							</select>
						</div>
					</div>

					<div class="form-group row pt-0">
						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_telefone">Telefône</label>
							<input class="form-control" type="text" id="id_telefone" name="telefone" placeholder="+ 55 (99) 9999-9999">
						</div>
						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_celular">Celular</label>
							<input class="form-control" type="text" id="id_celular" name="celular" placeholder="+ 55 (99) 99999-9999" required>
						</div>
						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_enderecoCompleto">End. Completo</label>
							<input class="form-control" type="text" id="id_enderecoCompleto" name="enderecoCompleto" placeholder="Rua 1 Casa 2 Bairro 3" required>
						</div>
					</div>

					<div class="form-group row pt-0 pb-5">

						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_selectAtivarUsuario">Ativar Usuário ?</label>
							<select id="id_selectAtivarUsuario" name="ativo" class="form-control">
								<option value="ON" selected>ON</option>
								<option value="OFF">OFF</option>
							</select>
						</div>

						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_selectAtivarAdministrador">Ativar Administrador ?</label>
							<select id="id_selectAtivarAdministrador" name="admin" class="form-control">
								<option value="ON">ON</option>
								<option value="OFF" selected>OFF</option>
							</select>
						</div>

						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_selectAtivarAgendaPropira">Ativar Agenda Própria ?</label>
							<select id="id_selectAtivarAgendaPropira" name="agendaPropria" class="form-control">
								<option value="ON">ON</option>
								<option value="OFF" selected>OFF</option>
							</select>
						</div>
					</div>

					<hr class="style-one">
					<h2 class="pt-0 pb-5">Funcionalidades da Clínica</h2>

					<div class="form-group row pt-0">
						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_selectEstoque">Controle do Estoque</label>
							<select id="id_selectEstoque" name="controleEstoque" class="form-control">
								<option value="VISUALIZAR">VISUALIZAR</option>
								<option value="NAO_VISUALIZAR" selected>NÃO VISUALIZAR</option>
								<option value="MOVIMENTAR" >MOVIMENTAR</option>
								<option value="CONTROLE_TOTAL">CONTROLE TOTAL</option>
							</select>
						</div>
						<div class="col-sm-4 col-lg-4 mb-3 mb-sm-0">
							<label for="id_selectProntuario">Controle do Prontuário</label>
							<select id="id_selectProntuario" name="controleProntuario" class="form-control">
								<option value="VISUALIZAR">VISUALIZAR</option>
								<option value="NAO_VISUALIZAR" selected>NÃO VISUALIZAR</option>
								<option value="CONTROLE_TOTAL">CONTROLE TOTAL</option>
							</select>
						</div>
					</div>
					<div class="form-group row">
						<div class="col-sm-12">
							<hr class="style-one">
							<h2>Acesso às Funcionalidades de Usuário</h2>
							<div class="card  card-table">
								<div class="card-body">
									<table class="table table-striped table-hover table-fw-widget" id="id_table_funcionalidades">
										<thead>
										<tr>
											<th style="width:2%;" class="center" hidden>Código</th>
											<th style="width:40%;" class="center">Usuário</th>
											<th style="width:20%;" class="center">Acesso a Agenda</th>
											<th style="width:20%;" class="center">Acesso ao Financeiro</th>
											<th style="width:20%;" class="center">Acesso ao Prontuário</th>
										</tr>
										</thead>
										<tbody>
										{% for usuario in usuarios %}
										<tr class="odd gradeX center" id="{{usuario.pk}}">
											<td hidden>{{usuario.pk}}</td>
											<td class="center">{{ usuario.nomeCompleto }}</td>
											<td class="center">
												<select id="id_select_acesso_agenda_table_modal_{{ usuario.pk }}"
														json='{"id_user":{{usuario.pk}}, "field":"acesso_agenda"}' class="form-control">
													<option value="NAO_VISUALIZAR" selected>NÃO VISUALIZAR</option>
													<option value="VISUALIZAR">VISUALIZAR</option>
													<option value="EDITAR">EDITAR</option>
												</select>
											</td>
											<td class="center">
												<select id="id_select_acesso_financeiro_table_modal_{{ usuario.pk }}"
														json='{"id_user":{{usuario.pk}}, "field":"acesso_financeiro"}' class="form-control">
													<option value="NAO_VISUALIZAR" selected>NÃO VISUALIZAR</option>
													<option value="VISUALIZAR_DIARIO">VISUALIZAR DIÁRIO</option>
													<option value="VISUALIZAR_TOTAL">VISUALIZAR TOTAL</option>
													<option value="EDITAR_TOTAL">EDITAR TOTAL</option>
												</select>
											</td>
											<td class="center">
												<select id="id_select_acesso_prontuario_table_modal_{{ usuario.pk }}"
														json='{"id_user":{{usuario.pk}}, "field":"acesso_prontuario"}' class="form-control">
													<option value="NAO_VISUALIZAR" selected>NÃO VISUALIZAR</option>
													<option value="VISUALIZAR">VISUALIZAR</option>
												</select>
											</td>
										</tr>
										{% empty %}
										<tr>
											<td colspan="6">
												<h2>Você ainda não cadastrou nenhum médico</h2>
											<td>
										</tr>

										{% endfor %}
										</tbody>
										<!--Campo invisível por guardar a configuração dos selects da tabela para o novo usuário-->
										<input type="text" id="id_funcionalidadeUsuario" name="funcionalidadeUsuario" hidden>
										<!--Campo invisível por guardar a configuração dos selects da tabela para o novo usuário-->

										<!--&lt;!&ndash;Campo invisível que guarda se o tipo do formulário se é NOVO_USUARIO ou EDITAR_USUARIO&ndash;&gt;-->
										<!--<input type="text" id="id_tipo_formulario" name="tipo_formulario" hidden>-->
										<!--&lt;!&ndash;Campo invisível que guarda se o tipo do formulário se é NOVO_USUARIO ou EDITAR_USUARIO&ndash;&gt;-->

										<!--Campo contendo o ID do usuário a ser editado-->
										<input type="text" id="id_user" name="id_user" value="-1" hidden>
										<!--Campo contendo o ID do usuário a ser editado-->

										<input type="text" id="id_email_original" name="email_original" hidden>

									</table>
								</div>
							</div>
						</div>
					</div>
					<hr class="style-one">

					<div class="form-group row text-right">
						<div class="col-sm-11 col-md-11 col-lg-12 col-xl-12 offset-sm-1 offset-lg-0">
							<button class="btn btn-space btn-primary btn-big" type="submit" id="id_button_modal"><i class="icon mdi mdi-save"></i> Slavar Usuário</button>
						</div>
					</div>

				</form>
			</div>
		</div>
	</div>
</div>



{% endblock %}


{% block extrabottomjs %}
	<script src="{% static '/assets/lib/datatables/datatables.net/js/jquery.dataTables.js' %}" type="text/javascript"></script>
	<script src="{% static '/assets/lib/datatables/datatables.net-bs4/js/dataTables.bootstrap4.js' %}" type="text/javascript"></script>
	<script src="{% static '/assets/lib/datatables/datatables.net-buttons/js/dataTables.buttons.min.js' %}" type="text/javascript"></script>
	<!--<script src="{% static '/assets/lib/datatables/datatables.net-buttons/js/buttons.flash.min.js' %}" type="text/javascript"></script>-->
	<!--<script src="{% static '/assets/lib/datatables/jszip/jszip.min.js' %}" type="text/javascript"></script>-->
	<!--<script src="{% static '/assets/lib/datatables/pdfmake/pdfmake.min.js' %}" type="text/javascript"></script>-->
	<!--<script src="{% static '/assets/lib/datatables/pdfmake/vfs_fonts.js' %}" type="text/javascript"></script>-->
	<!--<script src="{% static '/assets/lib/datatables/datatables.net-buttons/js/buttons.colVis.min.js' %}" type="text/javascript"></script>-->
	<!--<script src="{% static '/assets/lib/datatables/datatables.net-buttons/js/buttons.print.min.js' %}" type="text/javascript"></script>-->
	<!--<script src="{% static '/assets/lib/datatables/datatables.net-buttons/js/buttons.html5.min.js' %}" type="text/javascript"></script>-->
	<!--<script src="{% static '/assets/lib/datatables/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js' %}" type="text/javascript"></script>-->
	<script src="{% static '/assets/lib/datatables/datatables.net-responsive/js/dataTables.responsive.min.js' %}" type="text/javascript"></script>
	<script src="{% static '/assets/lib/datatables/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js' %}" type="text/javascript"></script>
	<script src="{% static '/assets/lib/bootstrap/dist/js/bootstrap.bundle.min.js' %}" type="text/javascript"></script>
	<!--<script src="{% static '/assets/js/app-form-masks.js' %}" type="text/javascript"></script>-->
	<script src="{% static 'assets/lib/jquery.maskedinput/jquery.maskedinput.js' %}" type="text/javascript"></script>
	<script src="{% static '/assets/js/app-tables-datatables.js' %}" type="text/javascript"></script>
	<script src="{% static '/assets/js/jquery.validate.min.js' %}" type="text/javascript"></script>
	<script src="{% static '/assets/js/jquery.validate.msg.pt-br.js' %}" type="text/javascript"></script>
	<script src="{% static '/assets/js/clinica/usuario.js' %}" type="text/javascript"></script>
{% endblock %}


